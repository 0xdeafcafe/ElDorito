<!doctype html>
<html>
    <head>
        <title>Medals</title>
        <script type="text/javascript" src="dew://lib/dew.js"></script>
        <script type="text/javascript" src="dew://lib/jquery-2.2.1.min.js"></script>
        <style type="text/css">
            .event {
                color: white;
                font: 16pt "Tahoma", sans-serif;
                background: rgba(0, 0, 0, 0.75);
            }
        </style>
        <script type="text/javascript">
            var visibleEvents = 0;

            function getAudienceName(audience) {
                switch (audience) {
                    case MPEventAudience.CAUSE_PLAYER: return "cause player";
                    case MPEventAudience.CAUSE_TEAM: return "cause team";
                    case MPEventAudience.EFFECT_PLAYER: return "effect player";
                    case MPEventAudience.EFFECT_TEAM: return "effect team";
                    case MPEventAudience.ALL: return "all";
                    default: return audience.toString();
                }
            }

            dew.on("mpevent", function (event) {
                var data = event.data;
                var name = data.name;
                var audience = getAudienceName(data.audience);

                var element = $("<div></div>", {
                        "class": "event"
                    })
                    .text(name + " -> " + audience)
                    .appendTo($("#events"));

                visibleEvents++;
                if (visibleEvents === 1) {
                    dew.show();
                }

                setTimeout(function () {
                    element.remove();
                    visibleEvents--;
                    if (visibleEvents === 0) {
                        dew.hide();
                    }
                }, 3000);
            });
        </script>
    </head>
    <body>
        <div id="events"></div>
    </body>
</html>